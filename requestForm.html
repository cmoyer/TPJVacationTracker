<!DOCTYPE html>
<html ng-app="main">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="apple-touch-icon" sizes="144x144" href="images/ipad-retina.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="images/iphone-retina.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="images/ipad.png" />
    <link rel="apple-touch-icon" href="images/iphone.png" />
    <title>Vacation Tracker</title>

    <!--Frameworks-->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/select2/3.4.5/select2.css" rel="stylesheet">
    <link href="FullCalendar/css/fullcalendar.css" rel="stylesheet">
    <script src="FullCalendar/lib/jquery.min.js"></script>
    <script src="FullCalendar/lib/moment.min.js"></script>
    <script src="FullCalendar/js/fullcalendar.js"></script>
    <script src="js/calendarActions.js"></script>

    <!--Our Stylesheets-->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/select.css" rel="stylesheet">


    <!--Initialize the calendar-->
    <script>
        $(document).ready(function() {

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay'
                },
                editable: false,
                selectable:true,
                unselectAuto:false,
                selectHelper:true,
                eventLimit: true, // allow "more" link when too many events
                businessHours: true,
                //weekends: false,

                dayClick: function() {

                    // change the day's background color just for fun
                    //$(this).css('background-color', 'red');
                },
                select: function(start, end){


                    //we need to gather all of the days that aren't weekends and store them in an array
                    var dateArray;
                    var startDate = new Date(start.format());
                    var endDate = new Date(end.format());

                    console.log(startDate);
                    console.log(endDate);

                    startDate.setDate(startDate.getDate()+1);
                    dateArray = getDates(startDate, endDate);

                    //get the weekdays from the dateArray and store them in this array.
                    var vacationDays = [];
                    var arrayLength = dateArray.length;
                    for (var i = 0; i < arrayLength; i++){
                        var selectedDate = dateArray[i];
                        var day = selectedDate.getDay();
                        if (day != 0 && day != 6) {
                            vacationDays.push(selectedDate);
                        }
                    }

//                    console.log(dateArray);
//                    console.log(vacationDays);

                    // Now that we have the dates, dynamically create the form.
                    createDateSelections(vacationDays);
                }


            });

        });
    </script>

</head>

<body ng-controller="mainCtrl" class="ng-cloak">


<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">


        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="pull-left"><img src="images/vtBanner.jpg"/></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">My Requests <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="MyRequests.html">My Requests by Date</a></li>
                        <li><a href="MyGroupCalendar.html">My Group's Calendar</a></li>
                    </ul>
                </li>

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false">My Approvals <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="MyApprovals.html">My Approvals</a></li>
                        <li class="active"><a href="ApproverCalendar.html">Calendar View</a></li>
                    </ul>
                </li>
                <li class="dropdown test-dropdown pull-right">
                    <a href="#" id="userButton" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span> <span
                            ng-bind="user.username">&nbsp;&nbsp;</span><span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li class="">
                            <a id="" href="#" ng-click="logoutUser()">
                                Log out
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>


<nav class="navbar navbar-default navbar-fixed-top second-navbar" ng-show="true">
    <div id="actionLinksContainer" class="container-fluid">
        <div class="navbar-header">
            <div class="pageTitle">
                <h4>Vacation Request</h4>
            </div>
        </div>



    </div>
</nav>

<!--Our main form area-->
<div id="formBody" class="container-fluid">
    <!--Row containing calendar and day selectors-->
    <div class="row">

        <!--Our Calendar-->
        <div class="col-md-7">
            <div id='calendar'></div>
        </div>

        <!--The Full/half day selections-->
        <div class="col-md-5">
            <h4>Dates Selected</h4>

            <form action="#" id="mainform" method="get" name="mainform">
                <table id="myForm" class="table table-striped table-condensed"></table>
            </form>
        </div>
    </div>

    <!--Row containing Vacation Profile information-->
    <div class="row">
        <div class="col-md-12">

            <h3>My Vacation Hours</h3>
            <table class="table table-hover">
                <thead class="thead-default">
                <tr>
                    <th>Year</th>
                    <th>Start of Year</th>
                    <th>Rolled Over</th>
                    <th>Floating</th>
                    <th>Year Total</th>
                    <th>Requested</th>
                    <th>Approved</th>
                    <th>Taken</th>
                    <th>Remaining</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">2016</th>
                    <td>160</td>
                    <td>12</td>
                    <td>8</td>
                    <td>180</td>
                    <td>24</td>
                    <td>8</td>
                    <td>16</td>
                    <td>132</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>


<div id="notAvailableMask" class="hidden-lg hidden-md hidden-sm">
    <div id="notAvailableContent">
        <p>
            This application has not been optimized for use on small devices.
        </p>
        <p>
            Please open it using an iPad or desktop browser.
        </p>
    </div>
</div>


<!-- Bootstrap core JavaScript
 ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>-->
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="bootstrap/js/bootstrap.min.js"></script>


</body>
</html>